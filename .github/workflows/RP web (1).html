<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Republished - Transform Your Academic Writing</title>
    <style>
        :root {
            /* Light mode colors */
            --primary-blue: #2563eb;
            --secondary-blue: #3b82f6;
            --light-blue: #dbeafe;
            --dark-blue: #1e40af;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-500: #6b7280;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            --white: #ffffff;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            --background: var(--white);
            --text-primary: var(--gray-900);
            --text-secondary: var(--gray-700);
            --border: var(--gray-200);
            --card-bg: var(--white);
        }

        [data-theme="dark"] {
            --gray-50: #111827;
            --gray-100: #1f2937;
            --gray-200: #374151;
            --gray-300: #4b5563;
            --gray-500: #9ca3af;
            --gray-700: #d1d5db;
            --gray-800: #e5e7eb;
            --gray-900: #f9fafb;
            --background: #0f172a;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border: #374151;
            --card-bg: #1e293b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .tagline {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Main Content */
        .main {
            padding: 3rem 0;
        }

        .hero {
            text-align: center;
            margin-bottom: 3rem;
        }

        .hero h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .hero p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Input Section */
        .input-section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            border: 1px solid var(--border);
        }

        .textarea-container {
            position: relative;
            margin-bottom: 1rem;
        }

        .main-textarea {
            width: 100%;
            min-height: 300px;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            background: var(--background);
            color: var(--text-primary);
            transition: border-color 0.3s ease;
        }

        .main-textarea:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        .word-counter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .word-count {
            font-weight: 500;
        }

        .word-limit {
            color: var(--warning);
        }

        .sample-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .sample-btn {
            background: var(--gray-100);
            border: 1px solid var(--border);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-secondary);
        }

        .sample-btn:hover {
            background: var(--gray-200);
        }

        /* Feature Buttons */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .feature-button {
            background: var(--card-bg);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 2rem 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-blue);
        }

        .feature-button.processing {
            pointer-events: none;
            opacity: 0.7;
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .feature-description {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Loading Spinner */
        .spinner {
            display: none;
            width: 40px;
            height: 40px;
            border: 4px solid var(--gray-200);
            border-top: 4px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 1rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Results Section */
        .results-section {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border);
            overflow: hidden;
            margin-bottom: 2rem;
            display: none;
        }

        .results-header {
            background: var(--primary-blue);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .results-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .close-results {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 18px;
        }

        .results-content {
            padding: 2rem;
        }

        /* Comparison View */
        .comparison-view {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .comparison-panel {
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }

        .comparison-header {
            background: var(--gray-100);
            padding: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .comparison-content {
            padding: 1rem;
            min-height: 200px;
            background: var(--background);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Score Display */
        .score-display {
            text-align: center;
            margin: 2rem 0;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(var(--primary-blue) 0deg, var(--gray-200) 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            position: relative;
        }

        .score-circle::before {
            content: '';
            width: 80px;
            height: 80px;
            background: var(--card-bg);
            border-radius: 50%;
            position: absolute;
        }

        .score-text {
            font-size: 1.5rem;
            font-weight: bold;
            z-index: 1;
            color: var(--text-primary);
        }

        .score-label {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        /* Highlighted Text */
        .highlight-plagiarism {
            background: rgba(239, 68, 68, 0.2);
            border-radius: 3px;
            padding: 2px 4px;
        }

        .highlight-ai {
            background: rgba(245, 158, 11, 0.2);
            border-radius: 3px;
            padding: 2px 4px;
        }

        .highlight-grammar {
            border-bottom: 2px wavy var(--error);
            cursor: pointer;
        }

        /* Grammar Errors List */
        .errors-list {
            margin-top: 2rem;
        }

        .error-item {
            background: var(--gray-50);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .error-type {
            font-weight: 600;
            color: var(--error);
            font-size: 12px;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }

        .error-text {
            background: rgba(239, 68, 68, 0.1);
            padding: 4px 8px;
            border-radius: 4px;
            font-family: monospace;
            margin-bottom: 0.5rem;
        }

        .error-suggestion {
            color: var(--success);
            font-style: italic;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
        }

        .btn-primary:hover {
            background: var(--dark-blue);
        }

        .btn-secondary {
            background: var(--gray-200);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--gray-300);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .comparison-view {
                grid-template-columns: 1fr;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .theme-toggle {
                position: relative;
                top: 0;
                right: 0;
                margin-top: 1rem;
            }
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 6px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: var(--success);
        }

        .notification.error {
            background: var(--error);
        }

        /* History Panel */
        .history-panel {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 2rem;
            display: none;
        }

        .history-item {
            padding: 0.5rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            font-size: 14px;
        }

        .history-item:hover {
            background: var(--gray-50);
        }

        .footer {
            text-align: center;
            padding: 2rem 0;
            color: var(--text-secondary);
            border-top: 1px solid var(--border);
            margin-top: 3rem;
        }
    </style>
</head>
<body>
    <div class="notification" id="notification"></div>

    <header class="header">
        <button class="theme-toggle" onclick="toggleTheme()">🌙 Dark Mode</button>
        <div class="container">
            <div class="logo">Research Republished</div>
            <div class="tagline">Transform Your Academic Writing</div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <div class="hero">
                <h1>Professional Academic Writing Tools</h1>
                <p>Enhance your research papers with our comprehensive suite of writing tools. Rephrase content, check for plagiarism, humanize AI text, and perfect your grammar.</p>
            </div>

            <div class="input-section">
                <div class="textarea-container">
                    <textarea 
                        class="main-textarea" 
                        id="mainText"
                        placeholder="Paste your text here (800-1200 words recommended for best results)..."
                        oninput="updateWordCount()"
                    ></textarea>
                </div>
                
                <div class="word-counter">
                    <div class="word-count" id="wordCount">Words: 0</div>
                    <div class="word-limit" id="wordLimit">Recommended: 800-1200 words</div>
                </div>

                <div class="sample-buttons">
                    <button class="sample-btn" onclick="loadSampleText(1)">📄 Load Sample Academic Text</button>
                    <button class="sample-btn" onclick="loadSampleText(2)">📋 Load Research Abstract</button>
                    <button class="sample-btn" onclick="clearText()">🗑️ Clear Text</button>
                </div>
            </div>

            <div class="features-grid">
                <div class="feature-button" onclick="rephraseText()" id="rephraseBtn">
                    <div class="spinner" id="rephraseSpinner"></div>
                    <div class="feature-icon">🔄</div>
                    <div class="feature-title">Rephrase Text</div>
                    <div class="feature-description">Transform your text while maintaining original meaning</div>
                </div>

                <div class="feature-button" onclick="checkPlagiarism()" id="plagiarismBtn">
                    <div class="spinner" id="plagiarismSpinner"></div>
                    <div class="feature-icon">🔍</div>
                    <div class="feature-title">Plagiarism Check</div>
                    <div class="feature-description">Detect copied content and ensure originality</div>
                </div>

                <div class="feature-button" onclick="removeAIContent()" id="aiBtn">
                    <div class="spinner" id="aiSpinner"></div>
                    <div class="feature-icon">🤖</div>
                    <div class="feature-title">AI Content Remover</div>
                    <div class="feature-description">Humanize AI-generated text naturally</div>
                </div>

                <div class="feature-button" onclick="checkGrammar()" id="grammarBtn">
                    <div class="spinner" id="grammarSpinner"></div>
                    <div class="feature-icon">✓</div>
                    <div class="feature-title">Grammar Checker</div>
                    <div class="feature-description">Fix spelling, grammar, and style errors</div>
                </div>
            </div>

            <div class="results-section" id="resultsSection">
                <div class="results-header">
                    <div class="results-title" id="resultsTitle">Results</div>
                    <button class="close-results" onclick="closeResults()">✕</button>
                </div>
                <div class="results-content" id="resultsContent">
                    <!-- Results will be populated here -->
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Research Republished. Professional Academic Writing Tools.</p>
        </div>
    </footer>

    <script>
        // Sample texts data
        const sampleTexts = {
            1: "Artificial intelligence has revolutionized various sectors of modern society, fundamentally transforming how we approach complex problem-solving and data analysis. The implementation of machine learning algorithms has enabled computers to perform sophisticated tasks that previously required human intelligence and expertise. This technological advancement has significant implications for education, healthcare, business operations, and research methodologies. Furthermore, the integration of AI systems in academic institutions has enhanced learning experiences and streamlined administrative processes. However, it is important to note that these developments also raise ethical considerations regarding data privacy, algorithmic bias, and the potential displacement of human workers. As we delve into the future of AI applications, researchers must carefully balance innovation with responsible implementation strategies. The continuous evolution of artificial intelligence technologies presents both opportunities and challenges that require comprehensive analysis and thoughtful consideration. Moreover, the interdisciplinary nature of AI research necessitates collaboration between computer scientists, ethicists, social scientists, and domain experts to ensure that these powerful tools are developed and deployed in ways that benefit society as a whole. This collaborative approach is crucial for addressing the complex questions surrounding AI governance, transparency, and accountability in various applications.",
            2: "This comprehensive study examines the correlation between social media usage patterns and academic performance metrics among university students across multiple institutions. Data was systematically collected through structured surveys, behavioral tracking, and academic record analysis over a twelve-month period. Statistical analysis revealed a significant negative correlation between excessive social media use and grade point average, with students spending more than four hours daily on social platforms showing measurably lower academic outcomes. The research methodology employed both quantitative and qualitative approaches to understand the underlying mechanisms affecting student performance. Furthermore, the study identified specific social media behaviors that contribute to academic distraction, including frequent notification checking, multitasking during study sessions, and reduced sleep quality due to late-night scrolling. Additionally, the investigation revealed that certain types of social media engagement, such as educational content consumption and academic networking, showed positive correlations with learning outcomes. These findings suggest that the relationship between social media and academic performance is nuanced and depends heavily on usage patterns and content types. The implications of this research extend beyond individual student behavior to institutional policies and digital wellness programs designed to optimize student success in the digital age."
        };

        // Synonym dictionary for rephrasing
        const synonyms = {
            'important': ['crucial', 'vital', 'significant', 'essential', 'key'],
            'show': ['demonstrate', 'illustrate', 'reveal', 'indicate', 'display'],
            'use': ['utilize', 'employ', 'apply', 'implement', 'leverage'],
            'help': ['assist', 'aid', 'facilitate', 'support', 'enable'],
            'change': ['transform', 'modify', 'alter', 'adjust', 'revise'],
            'study': ['research', 'investigation', 'analysis', 'examination', 'inquiry'],
            'data': ['information', 'evidence', 'statistics', 'findings', 'metrics'],
            'analyze': ['examine', 'evaluate', 'assess', 'investigate', 'scrutinize'],
            'create': ['develop', 'generate', 'produce', 'establish', 'construct'],
            'provide': ['offer', 'supply', 'deliver', 'furnish', 'present'],
            'increase': ['enhance', 'boost', 'improve', 'elevate', 'amplify'],
            'decrease': ['reduce', 'diminish', 'lower', 'minimize', 'lessen'],
            'different': ['various', 'diverse', 'distinct', 'alternative', 'varied'],
            'method': ['approach', 'technique', 'strategy', 'procedure', 'system'],
            'result': ['outcome', 'consequence', 'effect', 'finding', 'conclusion'],
            'significant': ['substantial', 'considerable', 'notable', 'remarkable', 'meaningful'],
            'develop': ['create', 'establish', 'build', 'form', 'construct'],
            'process': ['procedure', 'method', 'system', 'mechanism', 'operation'],
            'effective': ['efficient', 'successful', 'productive', 'beneficial', 'advantageous'],
            'research': ['study', 'investigation', 'inquiry', 'analysis', 'examination']
        };

        // Common AI phrases to detect
        const aiPhrases = [
            'it is important to note that',
            'in today\'s modern world',
            'has revolutionized',
            'plays a crucial role',
            'it is worth mentioning',
            'delve into',
            'in conclusion',
            'furthermore',
            'moreover',
            'significant implications',
            'comprehensive analysis',
            'multifaceted approach',
            'it goes without saying',
            'needless to say',
            'the fact of the matter is'
        ];

        // Global variables
        let processingHistory = [];
        let currentTheme = 'light';

        // Theme toggle functionality
        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.querySelector('.theme-toggle');
            
            if (currentTheme === 'light') {
                body.setAttribute('data-theme', 'dark');
                themeToggle.textContent = '☀️ Light Mode';
                currentTheme = 'dark';
            } else {
                body.removeAttribute('data-theme');
                themeToggle.textContent = '🌙 Dark Mode';
                currentTheme = 'light';
            }
        }

        // Word count functionality
        function updateWordCount() {
            const text = document.getElementById('mainText').value;
            const words = text.trim() ? text.trim().split(/\s+/).length : 0;
            const wordCountEl = document.getElementById('wordCount');
            const wordLimitEl = document.getElementById('wordLimit');
            
            wordCountEl.textContent = `Words: ${words}`;
            
            if (words > 1200) {
                wordLimitEl.textContent = 'Warning: Exceeds recommended limit';
                wordLimitEl.style.color = 'var(--error)';
            } else if (words < 800) {
                wordLimitEl.textContent = 'Recommended: 800-1200 words';
                wordLimitEl.style.color = 'var(--warning)';
            } else {
                wordLimitEl.textContent = 'Perfect range: 800-1200 words';
                wordLimitEl.style.color = 'var(--success)';
            }
        }

        // Sample text loading
        function loadSampleText(type) {
            document.getElementById('mainText').value = sampleTexts[type];
            updateWordCount();
            showNotification('Sample text loaded successfully!', 'success');
        }

        // Clear text
        function clearText() {
            document.getElementById('mainText').value = '';
            updateWordCount();
            closeResults();
        }

        // Show notification
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Show loading spinner
        function showSpinner(buttonId, spinnerId) {
            const button = document.getElementById(buttonId);
            const spinner = document.getElementById(spinnerId);
            button.classList.add('processing');
            spinner.style.display = 'block';
        }

        // Hide loading spinner
        function hideSpinner(buttonId, spinnerId) {
            const button = document.getElementById(buttonId);
            const spinner = document.getElementById(spinnerId);
            button.classList.remove('processing');
            spinner.style.display = 'none';
        }

        // Show results section
        function showResults(title, content) {
            document.getElementById('resultsTitle').textContent = title;
            document.getElementById('resultsContent').innerHTML = content;
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Close results
        function closeResults() {
            document.getElementById('resultsSection').style.display = 'none';
        }

        // Copy to clipboard functionality
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Text copied to clipboard!', 'success');
            }).catch(() => {
                showNotification('Failed to copy text', 'error');
            });
        }

        // Download functionality (simulated)
        function downloadText(text, filename) {
            const element = document.createElement('a');
            const file = new Blob([text], { type: 'text/plain' });
            element.href = URL.createObjectURL(file);
            element.download = filename;
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
            showNotification('File downloaded successfully!', 'success');
        }

        // Rephrase Text Function
        function rephraseText() {
            const text = document.getElementById('mainText').value.trim();
            if (!text) {
                showNotification('Please enter some text to rephrase', 'error');
                return;
            }

            showSpinner('rephraseBtn', 'rephraseSpinner');

            setTimeout(() => {
                const rephrasedText = performRephrasing(text);
                const originalWordCount = text.split(/\s+/).length;
                const rephrasedWordCount = rephrasedText.split(/\s+/).length;

                const content = `
                    <div class="comparison-view">
                        <div class="comparison-panel">
                            <div class="comparison-header">Original Text (${originalWordCount} words)</div>
                            <div class="comparison-content">${text}</div>
                        </div>
                        <div class="comparison-panel">
                            <div class="comparison-header">Rephrased Text (${rephrasedWordCount} words)</div>
                            <div class="comparison-content">${rephrasedText}</div>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="action-btn btn-primary" onclick="copyToClipboard('${rephrasedText.replace(/'/g, '\\\'')}')">
                            📋 Copy Rephrased Text
                        </button>
                        <button class="action-btn btn-secondary" onclick="downloadText('${rephrasedText.replace(/'/g, '\\\'')}', 'rephrased-text.txt')">
                            💾 Download Text
                        </button>
                        <button class="action-btn btn-secondary" onclick="document.getElementById('mainText').value = '${rephrasedText.replace(/'/g, '\\\'')}'">
                            ↩️ Use Rephrased Version
                        </button>
                    </div>
                `;

                showResults('Rephrasing Results', content);
                hideSpinner('rephraseBtn', 'rephraseSpinner');
                addToHistory('Rephrasing', text.substring(0, 50) + '...');
            }, 2000);
        }

        // Perform actual rephrasing
        function performRephrasing(text) {
            let rephrased = text;
            
            // Replace synonyms
            Object.keys(synonyms).forEach(word => {
                const regex = new RegExp(`\\b${word}\\b`, 'gi');
                rephrased = rephrased.replace(regex, () => {
                    const synonymList = synonyms[word.toLowerCase()];
                    return synonymList[Math.floor(Math.random() * synonymList.length)];
                });
            });

            // Convert some passive to active voice (simplified)
            rephrased = rephrased.replace(/was (\w+ed)/g, 'became $1');
            rephrased = rephrased.replace(/is (\w+ed)/g, 'becomes $1');
            
            // Restructure some sentences
            rephrased = rephrased.replace(/However, /g, 'Nevertheless, ');
            rephrased = rephrased.replace(/Moreover, /g, 'Additionally, ');
            rephrased = rephrased.replace(/Furthermore, /g, 'In addition, ');
            
            return rephrased;
        }

        // Check Plagiarism Function
        function checkPlagiarism() {
            const text = document.getElementById('mainText').value.trim();
            if (!text) {
                showNotification('Please enter some text to check for plagiarism', 'error');
                return;
            }

            showSpinner('plagiarismBtn', 'plagiarismSpinner');

            setTimeout(() => {
                const plagiarismScore = Math.floor(Math.random() * 25) + 5; // 5-30% plagiarism
                const highlightedText = highlightPlagiarismSections(text);
                const sources = generateFakeSources();

                const content = `
                    <div class="score-display">
                        <div class="score-circle" style="background: conic-gradient(var(--error) ${plagiarismScore * 3.6}deg, var(--gray-200) ${plagiarismScore * 3.6}deg)">
                            <div class="score-text">${plagiarismScore}%</div>
                        </div>
                        <div class="score-label">Potential Plagiarism Detected</div>
                    </div>
                    
                    <div class="comparison-panel">
                        <div class="comparison-header">Text with Highlighted Matches</div>
                        <div class="comparison-content">${highlightedText}</div>
                    </div>
                    
                    <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Potential Sources:</h3>
                    ${sources.map(source => `
                        <div class="error-item">
                            <div class="error-type">Source Match</div>
                            <div style="font-weight: 600; margin-bottom: 0.5rem;">${source.title}</div>
                            <div style="color: var(--text-secondary); font-size: 12px;">${source.url}</div>
                            <div style="margin-top: 0.5rem;">Similarity: ${source.similarity}%</div>
                        </div>
                    `).join('')}
                    
                    <div class="action-buttons">
                        <button class="action-btn btn-primary" onclick="generateCitations()">
                            📚 Generate Citations
                        </button>
                        <button class="action-btn btn-secondary" onclick="downloadText('Plagiarism Report\\n\\nOverall Score: ${plagiarismScore}%\\n\\n${sources.map(s => s.title + ' - ' + s.similarity + '%').join('\\n')}', 'plagiarism-report.txt')">
                            💾 Download Report
                        </button>
                    </div>
                `;

                showResults('Plagiarism Check Results', content);
                hideSpinner('plagiarismBtn', 'plagiarismSpinner');
                addToHistory('Plagiarism Check', `${plagiarismScore}% similarity detected`);
            }, 3000);
        }

        // Highlight plagiarism sections
        function highlightPlagiarismSections(text) {
            const sentences = text.split('. ');
            return sentences.map(sentence => {
                if (Math.random() < 0.3) { // 30% chance of highlighting
                    return `<span class="highlight-plagiarism">${sentence}</span>`;
                }
                return sentence;
            }).join('. ');
        }

        // Generate fake sources
        function generateFakeSources() {
            const sources = [
                { title: 'Journal of Academic Research', url: 'https://academic-research.edu', similarity: Math.floor(Math.random() * 15) + 10 },
                { title: 'International Studies Quarterly', url: 'https://studies-quarterly.org', similarity: Math.floor(Math.random() * 12) + 8 },
                { title: 'Research Methodology Handbook', url: 'https://methodology-book.com', similarity: Math.floor(Math.random() * 10) + 5 },
                { title: 'Educational Psychology Review', url: 'https://edu-psych.net', similarity: Math.floor(Math.random() * 8) + 4 }
            ];
            return sources.slice(0, Math.floor(Math.random() * 3) + 2);
        }

        // Remove AI Content Function
        function removeAIContent() {
            const text = document.getElementById('mainText').value.trim();
            if (!text) {
                showNotification('Please enter some text to analyze for AI content', 'error');
                return;
            }

            showSpinner('aiBtn', 'aiSpinner');

            setTimeout(() => {
                const aiScore = calculateAIScore(text);
                const humanizedText = humanizeText(text);
                const newAIScore = Math.max(5, Math.floor(aiScore * 0.3)); // Reduce AI score significantly

                const content = `
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                        <div class="score-display">
                            <div class="score-circle" style="background: conic-gradient(var(--warning) ${aiScore * 3.6}deg, var(--gray-200) ${aiScore * 3.6}deg)">
                                <div class="score-text">${aiScore}%</div>
                            </div>
                            <div class="score-label">Original AI Score</div>
                        </div>
                        <div class="score-display">
                            <div class="score-circle" style="background: conic-gradient(var(--success) ${newAIScore * 3.6}deg, var(--gray-200) ${newAIScore * 3.6}deg)">
                                <div class="score-text">${newAIScore}%</div>
                            </div>
                            <div class="score-label">Humanized AI Score</div>
                        </div>
                    </div>
                    
                    <div class="comparison-view">
                        <div class="comparison-panel">
                            <div class="comparison-header">Original Text (AI Score: ${aiScore}%)</div>
                            <div class="comparison-content">${highlightAIContent(text)}</div>
                        </div>
                        <div class="comparison-panel">
                            <div class="comparison-header">Humanized Text (AI Score: ${newAIScore}%)</div>
                            <div class="comparison-content">${humanizedText}</div>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn btn-primary" onclick="copyToClipboard('${humanizedText.replace(/'/g, '\\\'')}')">
                            📋 Copy Humanized Text
                        </button>
                        <button class="action-btn btn-secondary" onclick="downloadText('${humanizedText.replace(/'/g, '\\\'')}', 'humanized-text.txt')">
                            💾 Download Text
                        </button>
                        <button class="action-btn btn-secondary" onclick="document.getElementById('mainText').value = '${humanizedText.replace(/'/g, '\\\'')}'">
                            ↩️ Use Humanized Version
                        </button>
                    </div>
                `;

                showResults('AI Content Analysis', content);
                hideSpinner('aiBtn', 'aiSpinner');
                addToHistory('AI Content Removal', `Reduced from ${aiScore}% to ${newAIScore}%`);
            }, 2500);
        }

        // Calculate AI Score
        function calculateAIScore(text) {
            let aiScore = 0;
            const lowerText = text.toLowerCase();
            
            // Check for AI phrases
            aiPhrases.forEach(phrase => {
                if (lowerText.includes(phrase)) {
                    aiScore += 15;
                }
            });
            
            // Check for repetitive patterns
            const sentences = text.split('. ');
            const avgSentenceLength = sentences.reduce((sum, s) => sum + s.length, 0) / sentences.length;
            if (avgSentenceLength > 120) aiScore += 10;
            
            // Check for formal language density
            const formalWords = ['furthermore', 'moreover', 'consequently', 'therefore', 'subsequently'];
            formalWords.forEach(word => {
                if (lowerText.includes(word)) aiScore += 5;
            });
            
            return Math.min(85, Math.max(15, aiScore));
        }

        // Highlight AI content
        function highlightAIContent(text) {
            let highlighted = text;
            aiPhrases.forEach(phrase => {
                const regex = new RegExp(phrase, 'gi');
                highlighted = highlighted.replace(regex, `<span class="highlight-ai">${phrase}</span>`);
            });
            return highlighted;
        }

        // Humanize text
        function humanizeText(text) {
            let humanized = text;
            
            // Replace AI phrases with more natural alternatives
            humanized = humanized.replace(/it is important to note that/gi, 'note that');
            humanized = humanized.replace(/in today's modern world/gi, 'nowadays');
            humanized = humanized.replace(/has revolutionized/gi, 'has changed');
            humanized = humanized.replace(/plays a crucial role/gi, 'is important');
            humanized = humanized.replace(/it is worth mentioning/gi, 'also');
            humanized = humanized.replace(/delve into/gi, 'explore');
            humanized = humanized.replace(/furthermore/gi, 'also');
            humanized = humanized.replace(/moreover/gi, 'what\'s more');
            humanized = humanized.replace(/significant implications/gi, 'important effects');
            
            // Add more personal touches
            humanized = humanized.replace(/The research shows/gi, 'Research shows');
            humanized = humanized.replace(/Studies have demonstrated/gi, 'Studies show');
            
            // Break up long sentences occasionally
            const sentences = humanized.split('. ');
            return sentences.map(sentence => {
                if (sentence.length > 150 && sentence.includes(' and ')) {
                    return sentence.replace(/ and (?=[A-Z])/g, '. ');
                }
                return sentence;
            }).join('. ');
        }

        // Check Grammar Function
        function checkGrammar() {
            const text = document.getElementById('mainText').value.trim();
            if (!text) {
                showNotification('Please enter some text to check grammar', 'error');
                return;
            }

            showSpinner('grammarBtn', 'grammarSpinner');

            setTimeout(() => {
                const errors = findGrammarErrors(text);
                const correctedText = correctGrammarErrors(text, errors);
                
                const content = `
                    <div class="score-display">
                        <div class="score-circle" style="background: conic-gradient(${errors.length > 5 ? 'var(--error)' : 'var(--success)'} ${Math.min(errors.length * 20, 360)}deg, var(--gray-200) ${Math.min(errors.length * 20, 360)}deg)">
                            <div class="score-text">${errors.length}</div>
                        </div>
                        <div class="score-label">Errors Found</div>
                    </div>
                    
                    ${errors.length > 0 ? `
                        <div class="errors-list">
                            <h3>Grammar &amp; Spelling Issues:</h3>
                            ${errors.map((error, index) => `
                                <div class="error-item">
                                    <div class="error-type">${error.type}</div>
                                    <div class="error-text">${error.text}</div>
                                    <div class="error-suggestion">Suggestion: ${error.suggestion}</div>
                                </div>
                            `).join('')}
                        </div>
                    ` : '<p style="text-align: center; color: var(--success); font-size: 1.2rem;">🎉 No grammar errors found!</p>'}
                    
                    ${errors.length > 0 ? `
                        <div class="comparison-view" style="margin-top: 2rem;">
                            <div class="comparison-panel">
                                <div class="comparison-header">Original Text</div>
                                <div class="comparison-content">${highlightGrammarErrors(text, errors)}</div>
                            </div>
                            <div class="comparison-panel">
                                <div class="comparison-header">Corrected Text</div>
                                <div class="comparison-content">${correctedText}</div>
                            </div>
                        </div>
                    ` : ''}
                    
                    <div class="action-buttons">
                        ${errors.length > 0 ? `
                            <button class="action-btn btn-success" onclick="document.getElementById('mainText').value = '${correctedText.replace(/'/g, '\\\'')}'">
                                ✨ Apply All Fixes
                            </button>
                            <button class="action-btn btn-primary" onclick="copyToClipboard('${correctedText.replace(/'/g, '\\\'')}')">
                                📋 Copy Corrected Text
                            </button>
                        ` : ''}
                        <button class="action-btn btn-secondary" onclick="downloadText('Grammar Report\\n\\nErrors Found: ${errors.length}\\n\\n${errors.map(e => e.type + ': ' + e.text + ' -> ' + e.suggestion).join('\\n')}', 'grammar-report.txt')">
                            💾 Download Report
                        </button>
                    </div>
                `;

                showResults('Grammar Check Results', content);
                hideSpinner('grammarBtn', 'grammarSpinner');
                addToHistory('Grammar Check', `${errors.length} errors found`);
            }, 2000);
        }

        // Find grammar errors
        function findGrammarErrors(text) {
            const errors = [];
            
            // Common spelling errors
            const spellingErrors = {
                'recieve': 'receive',
                'seperate': 'separate',
                'occured': 'occurred',
                'neccessary': 'necessary',
                'definately': 'definitely',
                'alot': 'a lot',
                'thier': 'their',
                'wich': 'which',
                'untill': 'until',
                'begining': 'beginning'
            };
            
            Object.keys(spellingErrors).forEach(error => {
                const regex = new RegExp(`\\b${error}\\b`, 'gi');
                if (text.match(regex)) {
                    errors.push({
                        type: 'Spelling Error',
                        text: error,
                        suggestion: spellingErrors[error]
                    });
                }
            });
            
            // Grammar issues
            if (text.match(/\bit's\b.*\b(purpose|meaning|significance)/gi)) {
                errors.push({
                    type: 'Grammar Error',
                    text: "it's" + " (possessive)",
                    suggestion: 'Use "its" for possessive, "it\'s" for "it is"'
                });
            }
            
            if (text.match(/between.*and.*and/gi)) {
                errors.push({
                    type: 'Grammar Error',
                    text: 'between...and...and',
                    suggestion: 'Use "between X and Y" or "among X, Y, and Z"'
                });
            }
            
            if (text.match(/\b(this|these)\s+(data|criteria|phenomena)\s+is\b/gi)) {
                errors.push({
                    type: 'Subject-Verb Agreement',
                    text: 'data/criteria is',
                    suggestion: 'Use "data are" or "criteria are" (plural forms)'
                });
            }
            
            // Punctuation
            if (text.match(/\w[.!?][a-z]/g)) {
                errors.push({
                    type: 'Punctuation Error',
                    text: 'Missing space after punctuation',
                    suggestion: 'Add space after sentence-ending punctuation'
                });
            }
            
            // Style improvements
            if (text.match(/very\s+(important|significant|good|bad)/gi)) {
                errors.push({
                    type: 'Style Suggestion',
                    text: '"very" + adjective',
                    suggestion: 'Use stronger adjectives: crucial, essential, excellent, terrible'
                });
            }
            
            return errors.slice(0, 8); // Limit to 8 errors for demo
        }

        // Highlight grammar errors
        function highlightGrammarErrors(text, errors) {
            let highlighted = text;
            errors.forEach(error => {
                if (error.text !== '"very" + adjective' && error.text !== 'Missing space after punctuation') {
                    const regex = new RegExp(`\\b${error.text.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}\\b`, 'gi');
                    highlighted = highlighted.replace(regex, `<span class="highlight-grammar">${error.text}</span>`);
                }
            });
            return highlighted;
        }

        // Correct grammar errors
        function correctGrammarErrors(text, errors) {
            let corrected = text;
            
            // Apply spelling corrections
            const spellingErrors = {
                'recieve': 'receive',
                'seperate': 'separate',
                'occured': 'occurred',
                'neccessary': 'necessary',
                'definately': 'definitely',
                'alot': 'a lot',
                'thier': 'their',
                'wich': 'which',
                'untill': 'until',
                'begining': 'beginning'
            };
            
            Object.keys(spellingErrors).forEach(error => {
                const regex = new RegExp(`\\b${error}\\b`, 'gi');
                corrected = corrected.replace(regex, spellingErrors[error]);
            });
            
            // Fix common grammar issues
            corrected = corrected.replace(/\bit's\s+(purpose|meaning|significance)/gi, 'its $1');
            corrected = corrected.replace(/very\s+(important|significant)/gi, 'crucial');
            corrected = corrected.replace(/very\s+(good)/gi, 'excellent');
            corrected = corrected.replace(/very\s+(bad)/gi, 'terrible');
            corrected = corrected.replace(/\bthis data is\b/gi, 'these data are');
            corrected = corrected.replace(/\bthis criteria is\b/gi, 'these criteria are');
            
            return corrected;
        }

        // Add to processing history
        function addToHistory(action, description) {
            processingHistory.unshift({ action, description, timestamp: new Date() });
            if (processingHistory.length > 3) {
                processingHistory.pop();
            }
        }

        // Generate citations (placeholder)
        function generateCitations() {
            showNotification('Citations generated! (Feature simulated)', 'success');
        }

        // Initialize word count on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateWordCount();
        });
    </script>
</body>
</html>